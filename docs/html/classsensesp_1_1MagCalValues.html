<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SignalK-Orientation: sensesp::MagCalValues Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SignalK-Orientation
   &#160;<span id="projectnumber">0.2.1</span>
   </div>
   <div id="projectbrief">Orientation output in Signal K format for ESP32</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>sensesp</b></li><li class="navelem"><a class="el" href="classsensesp_1_1MagCalValues.html">MagCalValues</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classsensesp_1_1MagCalValues-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">sensesp::MagCalValues Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classsensesp_1_1MagCalValues.html" title="MagCalValues reads and outputs magnetic calibration parameters.">MagCalValues</a> reads and outputs magnetic calibration parameters.  
 <a href="classsensesp_1_1MagCalValues.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="orientation__sensor_8h_source.html">orientation_sensor.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for sensesp::MagCalValues:</div>
<div class="dyncontent">
<div class="center"><img src="classsensesp_1_1MagCalValues__inherit__graph.png" border="0" usemap="#sensesp_1_1MagCalValues_inherit__map" alt="Inheritance graph"/></div>
<map name="sensesp_1_1MagCalValues_inherit__map" id="sensesp_1_1MagCalValues_inherit__map">
<area shape="rect" title="MagCalValues reads and outputs magnetic calibration parameters." alt="" coords="41,80,217,107"/>
<area shape="rect" title=" " alt="" coords="5,5,133,32"/>
<area shape="rect" title=" " alt="" coords="157,5,224,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for sensesp::MagCalValues:</div>
<div class="dyncontent">
<div class="center"><img src="classsensesp_1_1MagCalValues__coll__graph.png" border="0" usemap="#sensesp_1_1MagCalValues_coll__map" alt="Collaboration graph"/></div>
<map name="sensesp_1_1MagCalValues_coll__map" id="sensesp_1_1MagCalValues_coll__map">
<area shape="rect" title="MagCalValues reads and outputs magnetic calibration parameters." alt="" coords="181,95,357,121"/>
<area shape="rect" title=" " alt="" coords="5,5,133,32"/>
<area shape="rect" title=" " alt="" coords="157,5,224,32"/>
<area shape="rect" href="classsensesp_1_1OrientationSensor.html" title="OrientationSensor represents a 9&#45;Degrees&#45;of&#45;Freedom sensor (magnetometer, accelerometer,..." alt="" coords="248,5,448,32"/>
<area shape="rect" href="structsensesp_1_1MagCal.html" title=" " alt="" coords="473,5,605,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a12c3bd89f76ca213debbd8a1eb7ce1c5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsensesp_1_1MagCalValues.html#a12c3bd89f76ca213debbd8a1eb7ce1c5">MagCalValues</a> (<a class="el" href="classsensesp_1_1OrientationSensor.html">OrientationSensor</a> *orientation_sensor, uint report_interval_ms=100, String config_path=&quot;&quot;)</td></tr>
<tr class="memdesc:a12c3bd89f76ca213debbd8a1eb7ce1c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor sets up the frequency of output and the Signal K path.  <a href="classsensesp_1_1MagCalValues.html#a12c3bd89f76ca213debbd8a1eb7ce1c5">More...</a><br /></td></tr>
<tr class="separator:a12c3bd89f76ca213debbd8a1eb7ce1c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10283c646f12708f22b97c702744c7d2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsensesp_1_1MagCalValues.html#a10283c646f12708f22b97c702744c7d2">start</a> () override final</td></tr>
<tr class="memdesc:a10283c646f12708f22b97c702744c7d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">starts periodic outputs of <a class="el" href="structsensesp_1_1MagCal.html">MagCal</a> values  <a href="classsensesp_1_1MagCalValues.html#a10283c646f12708f22b97c702744c7d2">More...</a><br /></td></tr>
<tr class="separator:a10283c646f12708f22b97c702744c7d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a84c5c6989a76990251c1f4cb873f6a0a"><td class="memItemLeft" align="right" valign="top"><a id="a84c5c6989a76990251c1f4cb873f6a0a"></a>
<a class="el" href="classsensesp_1_1OrientationSensor.html">OrientationSensor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsensesp_1_1MagCalValues.html#a84c5c6989a76990251c1f4cb873f6a0a">orientation_sensor_</a></td></tr>
<tr class="memdesc:a84c5c6989a76990251c1f4cb873f6a0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the orientation sensor. <br /></td></tr>
<tr class="separator:a84c5c6989a76990251c1f4cb873f6a0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a5d082763fab7314054dcf2251d190fea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsensesp_1_1MagCalValues.html#a5d082763fab7314054dcf2251d190fea">Update</a> (void)</td></tr>
<tr class="memdesc:a5d082763fab7314054dcf2251d190fea"><td class="mdescLeft">&#160;</td><td class="mdescRight">fetches current attitude and notifies consumer  <a href="classsensesp_1_1MagCalValues.html#a5d082763fab7314054dcf2251d190fea">More...</a><br /></td></tr>
<tr class="separator:a5d082763fab7314054dcf2251d190fea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a949210c81c64083ee85205e94507bff3"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsensesp_1_1MagCalValues.html#a949210c81c64083ee85205e94507bff3">get_configuration</a> (JsonObject &amp;doc) override</td></tr>
<tr class="memdesc:a949210c81c64083ee85205e94507bff3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current sensor configuration and place it in a JSON object that can then be stored in non-volatile memory.  <a href="classsensesp_1_1MagCalValues.html#a949210c81c64083ee85205e94507bff3">More...</a><br /></td></tr>
<tr class="separator:a949210c81c64083ee85205e94507bff3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92e5f42f634d50720ce4fb4e82a441cc"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsensesp_1_1MagCalValues.html#a92e5f42f634d50720ce4fb4e82a441cc">set_configuration</a> (const JsonObject &amp;config) override</td></tr>
<tr class="memdesc:a92e5f42f634d50720ce4fb4e82a441cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use the values stored in JSON object config to update the appropriate member variables.  <a href="classsensesp_1_1MagCalValues.html#a92e5f42f634d50720ce4fb4e82a441cc">More...</a><br /></td></tr>
<tr class="separator:a92e5f42f634d50720ce4fb4e82a441cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaab0acb904c02df778e2974ccb389b1a"><td class="memItemLeft" align="right" valign="top"><a id="aaab0acb904c02df778e2974ccb389b1a"></a>
virtual String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsensesp_1_1MagCalValues.html#aaab0acb904c02df778e2974ccb389b1a">get_config_schema</a> () override</td></tr>
<tr class="memdesc:aaab0acb904c02df778e2974ccb389b1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetch the JSON format used for holding the configuration. <br /></td></tr>
<tr class="separator:aaab0acb904c02df778e2974ccb389b1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a2cd89c72c9a2865dc9b989088d769cc2"><td class="memItemLeft" align="right" valign="top"><a id="a2cd89c72c9a2865dc9b989088d769cc2"></a>
<a class="el" href="structsensesp_1_1MagCal.html">MagCal</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsensesp_1_1MagCalValues.html#a2cd89c72c9a2865dc9b989088d769cc2">mag_cal_</a></td></tr>
<tr class="memdesc:a2cd89c72c9a2865dc9b989088d769cc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">struct storing the current magnetic calibration parameters <br /></td></tr>
<tr class="separator:a2cd89c72c9a2865dc9b989088d769cc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeba3459ef2052bd96991ee71061ec4c7"><td class="memItemLeft" align="right" valign="top"><a id="aeba3459ef2052bd96991ee71061ec4c7"></a>
uint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsensesp_1_1MagCalValues.html#aeba3459ef2052bd96991ee71061ec4c7">report_interval_ms_</a></td></tr>
<tr class="memdesc:aeba3459ef2052bd96991ee71061ec4c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">interval between attitude updates to Signal K <br /></td></tr>
<tr class="separator:aeba3459ef2052bd96991ee71061ec4c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classsensesp_1_1MagCalValues.html" title="MagCalValues reads and outputs magnetic calibration parameters.">MagCalValues</a> reads and outputs magnetic calibration parameters. </p>
<p>The parameters are stored in an <a class="el" href="structsensesp_1_1MagCal.html">MagCal</a> struct, and sent together in one Signal K message. They are useful in determining how well the existing magnetic calibration suits the current magnetic environment. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a12c3bd89f76ca213debbd8a1eb7ce1c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12c3bd89f76ca213debbd8a1eb7ce1c5">&#9670;&nbsp;</a></span>MagCalValues()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sensesp::MagCalValues::MagCalValues </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsensesp_1_1OrientationSensor.html">OrientationSensor</a> *&#160;</td>
          <td class="paramname"><em>orientation_sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>report_interval_ms</em> = <code>100</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>config_path</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor sets up the frequency of output and the Signal K path. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">orientation_sensor</td><td>Pointer to the physical sensor's interface </td></tr>
    <tr><td class="paramname">report_interval_ms</td><td>Interval between output reports </td></tr>
    <tr><td class="paramname">config_path</td><td>RESTful path by which reporting frequency can be configured. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a949210c81c64083ee85205e94507bff3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a949210c81c64083ee85205e94507bff3">&#9670;&nbsp;</a></span>get_configuration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sensesp::MagCalValues::get_configuration </td>
          <td>(</td>
          <td class="paramtype">JsonObject &amp;&#160;</td>
          <td class="paramname"><em>doc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">private</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the current sensor configuration and place it in a JSON object that can then be stored in non-volatile memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">doc</td><td>JSON object to contain the configuration parameters to be updated. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a92e5f42f634d50720ce4fb4e82a441cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92e5f42f634d50720ce4fb4e82a441cc">&#9670;&nbsp;</a></span>set_configuration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool sensesp::MagCalValues::set_configuration </td>
          <td>(</td>
          <td class="paramtype">const JsonObject &amp;&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">private</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Use the values stored in JSON object config to update the appropriate member variables. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>JSON object containing the configuration parameters to be updated. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if successful; False if a parameter could not be found. </dd></dl>

</div>
</div>
<a id="a10283c646f12708f22b97c702744c7d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10283c646f12708f22b97c702744c7d2">&#9670;&nbsp;</a></span>start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sensesp::MagCalValues::start </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>starts periodic outputs of <a class="el" href="structsensesp_1_1MagCal.html">MagCal</a> values </p>
<p>Starts periodic output of <a class="el" href="structsensesp_1_1MagCal.html">MagCal</a> parameters.</p>
<p>The <a class="el" href="classsensesp_1_1MagCalValues.html#a10283c646f12708f22b97c702744c7d2" title="starts periodic outputs of MagCal values">start()</a> function is inherited from sensesp::Sensor, and is automatically called when the SensESP app starts. </p>

</div>
</div>
<a id="a5d082763fab7314054dcf2251d190fea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d082763fab7314054dcf2251d190fea">&#9670;&nbsp;</a></span>Update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void sensesp::MagCalValues::Update </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>fetches current attitude and notifies consumer </p>
<p>Provides one <a class="el" href="structsensesp_1_1MagCal.html">MagCal</a> reading from the orientation sensor.</p>
<p>Readings are obtained using the sensor fusion library's Get_() methods and assigned to the output variable that passes data from Producers to Consumers. Consumers of the magcal data are then informed by the call to notify(). If data are not valid (e.g. sensor not functioning), a struct member is set to false so when the Signal K message contents are assembled by as_signalk(),they can reflect that. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="orientation__sensor_8h_source.html">orientation_sensor.h</a></li>
<li>src/<a class="el" href="orientation__sensor_8cpp.html">orientation_sensor.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
